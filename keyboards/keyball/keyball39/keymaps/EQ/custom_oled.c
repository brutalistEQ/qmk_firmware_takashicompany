#include QMK_KEYBOARD_H

static const char PROGMEM mac_logo[]= {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0xf0, 
    0xf8, 0x7c, 0x7e, 0xbe, 0x8f, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0xf0, 0xfc, 0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x3f, 0x0f, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x3f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0xf0, 0xe0, 0xc0, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x07, 0x1f, 0x1f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x1f, 0x1f, 
    0x1f, 0x1f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x1f, 0x0f, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00
    };
static const char PROGMEM windows_logo[]= {
    0x00, 0x00, 0x00, 0xc0, 0xc0, 0xc0, 0xc0, 0xe0, 0xe0, 0xe0, 0xe0, 0xe0, 0xe0, 0xe0, 0x00, 0xf0, 
    0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf8, 0xf8, 0xf8, 0xf8, 0xf8, 0xf8, 0xf8, 0xfc, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0xff, 
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0x00, 0xfe, 
    0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x03, 0x03, 0x03, 0x03, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x00, 0x0f, 
    0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x1f, 0x1f, 0x1f, 0x1f, 0x1f, 0x1f, 0x1f, 0x3f, 0x00, 0x00, 0x00
    };

static const char PROGMEM lyr_num_0[]= {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 
    0xf0, 0xf8, 0xfc, 0xfe, 0x3e, 0x1f, 0x0f, 0x0f, 0x1f, 0x3e, 0xfe, 0xfc, 0xf8, 0xf0, 0x80, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 
    0xff, 0xff, 0xff, 0xff, 0xe0, 0x70, 0x38, 0x1c, 0x0e, 0x07, 0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 
    0x00, 0xfc, 0x80, 0x80, 0x0c, 0x10, 0xe0, 0x10, 0x0c, 0x00, 0xfc, 0x24, 0x24, 0xd8, 0x00, 0x03, 
    0x1f, 0x3f, 0x7f, 0xff, 0xf8, 0xf0, 0xe0, 0xe0, 0xf0, 0xf8, 0xff, 0x7f, 0x3f, 0x1f, 0x03, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    };
static const char PROGMEM lyr_num_1[]= {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0xc0, 0xc0, 0xe0, 0xf0, 0xf8, 0x7c, 0xfe, 0xfe, 0xfe, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0xfc, 0x80, 0x80, 0x0c, 0x10, 0xe0, 0x10, 0x0c, 0x00, 0xfc, 0x24, 0x24, 0xd8, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    };
static const char PROGMEM lyr_num_2[]= {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x60, 0x78, 0xfc, 0xfe, 0x7e, 0x1f, 0x0f, 0x0f, 0x0f, 0x1e, 0x3e, 0xfe, 0xfc, 0xfc, 0xf0, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x80, 0xc0, 0xe0, 0xf0, 0xf8, 0xfc, 0xff, 0x3f, 0x1f, 0x0f, 0x03, 0x00, 
    0x00, 0xfc, 0x80, 0x80, 0x0c, 0x10, 0xe0, 0x10, 0x0c, 0x00, 0xfc, 0x24, 0x24, 0xd8, 0x00, 0x80, 
    0xf0, 0xf8, 0xfe, 0xff, 0xff, 0xff, 0xf7, 0xf3, 0xf1, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    };
static const char PROGMEM lyr_num_3[]= {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 
    0x70, 0x7c, 0x7e, 0x7e, 0x1e, 0x1f, 0x0f, 0x0f, 0x1f, 0xfe, 0xfe, 0xfc, 0xf8, 0xe0, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x1c, 0x1c, 0x1e, 0x1e, 0x3f, 0xff, 0xf7, 0xf3, 0xe0, 0x80, 0x00, 
    0x00, 0xfc, 0x80, 0x80, 0x0c, 0x10, 0xe0, 0x10, 0x0c, 0x00, 0xfc, 0x24, 0x24, 0xd8, 0x00, 0x0c, 
    0x3c, 0x7e, 0x7e, 0xfe, 0xf8, 0xf0, 0xe0, 0xe0, 0xf0, 0xf8, 0xff, 0x7f, 0x3f, 0x1f, 0x07, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    };
static const char PROGMEM lyr_num_4[]= {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x80, 0xc0, 0xf0, 0xf8, 0xfe, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xe0, 
    0xf0, 0xfc, 0xfe, 0x9f, 0x8f, 0x87, 0x81, 0x81, 0xff, 0xff, 0xff, 0xff, 0x80, 0x80, 0x80, 0x00, 
    0x00, 0xfc, 0x80, 0x80, 0x0c, 0x10, 0xe0, 0x10, 0x0c, 0x00, 0xfc, 0x24, 0x24, 0xd8, 0x07, 0x07, 
    0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0xff, 0xff, 0xff, 0xff, 0x07, 0x07, 0x07, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    };
static const char PROGMEM lyr_num_5[]= {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0xf8, 0xff, 0xff, 0xff, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x1f, 0x1f, 0x1f, 0x1f, 0x0f, 0x0f, 0x07, 0x07, 0x0f, 0x0f, 0xff, 0xff, 0xfe, 0xfc, 0xf0, 0x00, 
    0x00, 0xfc, 0x80, 0x80, 0x0c, 0x10, 0xe0, 0x10, 0x0c, 0x00, 0xfc, 0x24, 0x24, 0xd8, 0x00, 0x06, 
    0x1e, 0x3e, 0x7e, 0x7e, 0x78, 0xf0, 0xf0, 0xf0, 0xf8, 0x7c, 0x7f, 0x7f, 0x3f, 0x1f, 0x07, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    };
static const char PROGMEM lyr_mouse[]= {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x18, 0x08, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x78, 0xfc, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfc, 0xf8, 0x00, 0xf8, 0xf0, 
    0xf0, 0xf0, 0xf0, 0xe0, 0xe0, 0xc0, 0xc0, 0x80, 0x00, 0x03, 0x06, 0x0c, 0x18, 0xf0, 0xc0, 0x00, 
    0x00, 0x78, 0x7c, 0xfe, 0xf3, 0xf3, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7e, 0x18, 0x0c, 0x0e, 0x07, 0x01, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    };
static const char *itoc(uint8_t number, uint8_t width) {
    static char str[5]; 
    uint8_t i = 0;
    width = width > 4 ? 4 : width;

    do {
        str[i++] = number % 10 + '0';
        number /= 10;
    } while (number != 0);

    while (i < width) {
        str[i++] = ' ';
    }

    int len = i;
    for (int j = 0; j < len / 2; j++) {
        char temp = str[j];
        str[j] = str[len - j - 1];
        str[len - j - 1] = temp;
    }

    str[i] = '\0';
    return str;
};

// レイヤーNo表示
static void print_layer_status(void) {
    oled_set_cursor(0, 13);
    switch (get_highest_layer(layer_state)) {
        case 1:  oled_write_raw_P(lyr_num_1, sizeof(lyr_num_1)); break;
        case 2:  oled_write_raw_P(lyr_num_2, sizeof(lyr_num_2)); break;
        case 3:  oled_write_raw_P(lyr_num_3, sizeof(lyr_num_3)); break;
        case 4:  oled_write_raw_P(lyr_num_4, sizeof(lyr_num_4)); break;
        case 5:  oled_write_raw_P(lyr_num_5, sizeof(lyr_num_5)); break;
        case 6:  oled_write_raw_P(lyr_mouse, sizeof(lyr_mouse)); break;
        default: oled_write_raw_P(lyr_num_0, sizeof(lyr_num_0)); break;
    }
};

// カスタム内容表示
void keyball_oled_render_mymain(void) {
    oled_set_cursor(0, 1);
    // print windows logo when left is master. otherwise print apple logo 
    if (is_keyboard_left()) {
      oled_write_raw_P(windows_logo, sizeof(windows_logo));
    } else {
      oled_write_raw_P(mac_logo, sizeof(mac_logo));
    };
    oled_set_cursor(0, 6);

    // print keyball info
    oled_write_ln_P(PSTR("STATE"), false);
    oled_write_P(PSTR("CPI"), false);
    oled_write(itoc(keyball_get_cpi(), 2), false);
    oled_write_P(PSTR("h "), false);
    oled_write(itoc(rgblight_get_hue(), 3), false);
    oled_write_P(PSTR("s "), false);
    oled_write(itoc(rgblight_get_sat(), 3), false);
    oled_write_P(PSTR("v "), false);
    oled_write_ln(itoc(rgblight_get_val(), 3), false);
    
    // print layer info
    print_layer_status();


}